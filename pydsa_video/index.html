<!DOCTYPE html>
<html>
  <head>
    <title>Python Cookbook for Scientific Data Analysis</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="generator" content="Hugo 0.37.1" />
<title>Drop Shape analysis using pyDSA (video) :: Python Cookbook for Scientific Data Analysis</title>
<link rel="shortcut icon" href="/Python-cookbook/images/favicon.png" type="image/x-icon" />
<link href="/Python-cookbook/css/font-awesome.min.css" rel="stylesheet">
<link href="/Python-cookbook/css/nucleus.css" rel="stylesheet">
<link href="/Python-cookbook/theme-flex/style.css" rel="stylesheet">

<link rel="stylesheet" href="/Python-cookbook/css/bootstrap.min.css">
<script src="/Python-cookbook/js/jquery-2.x.min.js"></script>
<script type="text/javascript">
      var baseurl = "https:\/\/gabylaunay.github.io\/Python-cookbook\/";
</script>
<meta name="description" content="Tutorial for drop shape analysis using pyDSA on a video.">


    
  </head>
  <body data-url="/Python-cookbook/pydsa_video/">
    
      <header>
  <div class="logo">
    
	
  
    <a class="baselink" href="https://gabylaunay.github.io/Python-cookbook/">Python Cookbook for Scientific Data Analysis</a>
  

  </div>
  <div class="burger"><a href="javascript:void(0);" style="font-size:15px;">&#9776;</a></div>
</header>
<article>
  <aside>
    <ul class="menu">
          <li data-nav-id="/Python-cookbook/" class="dd-item">
          <a href="/Python-cookbook/">
            <i class="fa fa-fw fa-home"></i>
          </a>
          </li>
    <li data-nav-id="/Python-cookbook/image-analysis/" class="dd-item
        ">
      <div>
      <a href="/Python-cookbook/image-analysis/">Drop Shape analysis using Python</a>
      </div>
    </li>
    <li data-nav-id="/Python-cookbook/pydsa/" class="dd-item
        ">
      <div>
      <a href="/Python-cookbook/pydsa/">Drop Shape analysis using pyDSA (image)</a>
      </div>
    </li>
    <li data-nav-id="/Python-cookbook/pydsa_video/" class="dd-item parent active
        ">
      <div>
      <a href="/Python-cookbook/pydsa_video/">Drop Shape analysis using pyDSA (video)</a>
      </div>
    </li>
    <li data-nav-id="/Python-cookbook/import-data/" class="dd-item
        ">
      <div>
      <a href="/Python-cookbook/import-data/">Importing Data</a>
      </div>
    </li>
    <li data-nav-id="/Python-cookbook/publication_quality_plots/" class="dd-item
        ">
      <div>
      <a href="/Python-cookbook/publication_quality_plots/">Publication-quality plots</a>
      </div>
    </li>




    </ul>
    <section>
    </section>
  </aside>
  <section class="page">
    
    <div class="nav-select">
      <center>Navigation : 
        <select onchange="javascript:location.href = this.value;">
          
    <option value="/Python-cookbook/image-analysis/" >
   Drop Shape analysis using Python</option>
    <option value="/Python-cookbook/pydsa/" >
   Drop Shape analysis using pyDSA (image)</option>
    <option value="/Python-cookbook/pydsa_video/"  selected>
   Drop Shape analysis using pyDSA (video)</option> 
  
    <option value="/Python-cookbook/import-data/" >
   Importing Data</option>
    <option value="/Python-cookbook/publication_quality_plots/" >
   Publication-quality plots</option>



        </select>
      </center>
    </div>
      <div>
        <div class="searchbox">
          <input data-search-input id="search-by" type="text" placeholder="Search...">
        </div>
        <script type="text/javascript" src="/Python-cookbook/js/lunr.min.js"></script>
        <script type="text/javascript" src="/Python-cookbook/js/auto-complete.js"></script>
        <link href="/Python-cookbook/css/auto-complete.css" rel="stylesheet">
        <script type="text/javascript">
          
              var baseurl = "https:\/\/gabylaunay.github.io\/Python-cookbook\/";
          
        </script>
        <script type="text/javascript" src="/Python-cookbook/js/search.js"></script>
      </div>
    

    <h1>Drop Shape analysis using pyDSA (video)</h1>
    
    
    



<div class="notices tip" ><p>You can get the python script detailled in this page here: <a href="files/script.py">script.py</a>.</p>

<p>And an archive containing the script and the data here: <a href="files/archive.tar.gz">archive.tar.gz</a>, <a href="files/archive.zip">archive.zip</a>.</p>
</div>


<div class="alert 
	alert-warning"
 
role="alert">It is recommended to read the tutorial on <a href="../pydsa/index.html">using pyDSA on a single image</a> before doing this tutorial.</div>


<p>This tutorial presents how to use pyDSA to analyze videos of drops.
The video used is a side-view of a drop during an inflation-deflation sequence.</p>

<h2 id="importing-a-video">Importing a video</h2>

<p>Importing works in the same way than for an image.</p>

<div class="alert 
	alert-warning"
 
role="alert">Importing images in Python can easily fill your memory, you can import only some images of the video by using the <code>incr</code> argument.</div>

<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#007020;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">pyDSA</span> <span style="color:#007020;font-weight:bold">as</span> <span style="color:#0e84b5;font-weight:bold">dsa</span>   
<span style="color:#007020;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">matplotlib.pyplot</span> <span style="color:#007020;font-weight:bold">as</span> <span style="color:#0e84b5;font-weight:bold">plt</span>

<span style="color:#60a0b0;font-style:italic"># Import an image</span>
ims <span style="color:#666">=</span> dsa<span style="color:#666">.</span>import_from_video(<span style="color:#4070a0"></span><span style="color:#4070a0">&#39;data/video.mp4&#39;</span>,
                            dx<span style="color:#666">=</span><span style="color:#40a070">1</span><span style="color:#666">/</span><span style="color:#40a070">120</span>, dy<span style="color:#666">=</span><span style="color:#40a070">1</span><span style="color:#666">/</span><span style="color:#40a070">120</span>, dt<span style="color:#666">=</span><span style="color:#40a070">1</span><span style="color:#666">/</span><span style="color:#40a070">10</span>,
                            unit_x<span style="color:#666">=</span><span style="color:#4070a0"></span><span style="color:#4070a0">&#39;mm&#39;</span>, unit_y<span style="color:#666">=</span><span style="color:#4070a0"></span><span style="color:#4070a0">&#39;mm&#39;</span>, unit_t<span style="color:#666">=</span><span style="color:#4070a0"></span><span style="color:#4070a0">&#39;s&#39;</span>,
                            incr<span style="color:#666">=</span><span style="color:#40a070">10</span>)
<span style="color:#60a0b0;font-style:italic"># Display</span>
ims<span style="color:#666">.</span>display()
plt<span style="color:#666">.</span>show()</code></pre></div>
<p><img src="pydsa_video_files/pydsa_video_1_0.png" alt="png" /></p>

<h2 id="detecting-the-edges-and-contact-angles">Detecting the edges and contact angles</h2>

<p>The method is similar than for a single image: we set the baseline, detect the edges, fit the edges, and compute the contact angles.</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">ims<span style="color:#666">.</span>set_baseline([<span style="color:#40a070">0.0</span>, <span style="color:#40a070">0.583</span>],
                 [<span style="color:#40a070">6.492</span>, <span style="color:#40a070">0.57</span>])
edges <span style="color:#666">=</span> ims<span style="color:#666">.</span>edge_detection()
edges<span style="color:#666">.</span>fit(s<span style="color:#666">=</span><span style="color:#40a070">0.01</span>)
edges<span style="color:#666">.</span>compute_contact_angle()

<span style="color:#60a0b0;font-style:italic"># Display</span>
fig, axs <span style="color:#666">=</span> plt<span style="color:#666">.</span>subplots(<span style="color:#40a070">2</span>, <span style="color:#40a070">3</span>, figsize<span style="color:#666">=</span>(<span style="color:#40a070">15</span>, <span style="color:#40a070">6.9</span>), sharex<span style="color:#666">=</span>True, sharey<span style="color:#666">=</span>True)
<span style="color:#007020;font-weight:bold">for</span> i, ax <span style="color:#007020;font-weight:bold">in</span> <span style="color:#007020">enumerate</span>(axs<span style="color:#666">.</span>flat):
    plt<span style="color:#666">.</span>sca(ax)
    ind <span style="color:#666">=</span> <span style="color:#007020">int</span>(i<span style="color:#666">/</span><span style="color:#40a070">5</span><span style="color:#666">*</span>(<span style="color:#007020">len</span>(ims) <span style="color:#666">-</span> <span style="color:#40a070">1</span>))
    ims[ind]<span style="color:#666">.</span>_display()
    edges[ind]<span style="color:#666">.</span>display()
    plt<span style="color:#666">.</span>xlabel(<span style="color:#4070a0"></span><span style="color:#4070a0">&#39;&#39;</span>)
    plt<span style="color:#666">.</span>ylabel(<span style="color:#4070a0"></span><span style="color:#4070a0">&#39;&#39;</span>)
    plt<span style="color:#666">.</span>title(<span style="color:#4070a0"></span><span style="color:#4070a0">&#39;t={:.2f}s&#39;</span><span style="color:#666">.</span>format(ims<span style="color:#666">.</span>times[ind]))
plt<span style="color:#666">.</span>xlim(<span style="color:#40a070">0</span>, <span style="color:#40a070">6.5</span>)
plt<span style="color:#666">.</span>ylim(<span style="color:#40a070">0</span>, <span style="color:#40a070">4.5</span>)
plt<span style="color:#666">.</span>show()</code></pre></div>
<p><img src="pydsa_video_files/pydsa_video_3_0.png" alt="png" /></p>

<h2 id="plotting-the-drop-properties-evolution">Plotting the drop properties evolution</h2>

<p>We can then display a summary of the drop properties evolution.
The following function will display:
- the evolution of the drop edge contact with the surface (blue and yellow in the first figure)
- the evolution of the drop base length (green in the first figure)
- the evolution of the contact angles (blue and yellow in the second figure)</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">edges<span style="color:#666">.</span>display_summary(figsize<span style="color:#666">=</span>(<span style="color:#40a070">10</span>, <span style="color:#40a070">8</span>))
plt<span style="color:#666">.</span>show()</code></pre></div>
<p><img src="pydsa_video_files/pydsa_video_5_0.png" alt="png" /></p>

<h2 id="accessing-the-drop-properties">Accessing the drop properties</h2>

<p>We can also extract the numeric values of those properties,
if we want to do further processing on them.</p>

<div class="alert 
	alert-info"
 
role="alert">Angles are defined in the trigonometric sens, from the horizontal line.</div>

<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">thetas, thetas_t <span style="color:#666">=</span> edges<span style="color:#666">.</span>get_contact_angles()
<span style="color:#007020;font-weight:bold">print</span>(<span style="color:#4070a0"></span><span style="color:#4070a0">&#34;=== Left contact angle: ===&#34;</span>)
<span style="color:#007020;font-weight:bold">print</span>(thetas[:, <span style="color:#40a070">0</span>])
<span style="color:#007020;font-weight:bold">print</span>(<span style="color:#4070a0"></span><span style="color:#4070a0">&#34;</span><span style="color:#4070a0;font-weight:bold">\n</span><span style="color:#4070a0">=== Right contact angle: ===&#34;</span>)
<span style="color:#007020;font-weight:bold">print</span>(thetas[:, <span style="color:#40a070">1</span>])

radius <span style="color:#666">=</span> edges<span style="color:#666">.</span>get_drop_base()
<span style="color:#007020;font-weight:bold">print</span>(<span style="color:#4070a0"></span><span style="color:#4070a0">&#34;</span><span style="color:#4070a0;font-weight:bold">\n</span><span style="color:#4070a0">=== Drop contact positions: ===&#34;</span>)
<span style="color:#007020;font-weight:bold">print</span>(radius)</code></pre></div>
<pre><code>=== Left contact angle: ===
[106.82124177 106.89153104 106.80195249 107.28297574 107.34363505
 107.27784188 106.95177242 107.53012718 107.16280456 107.25262441
 106.38800189 107.13128785 106.37357963 105.5870764  107.08325183
 106.39480128 106.66051429 106.58224643 106.58062816 107.08964047
 106.82985203 106.83611945 107.08110645 106.82104733 106.98000331
 107.32906465 106.79129417 106.34451226 105.77145275 106.69374328
 104.02426232 105.5866148  104.74019582 103.04931016 102.88969475
 102.69842583 103.88329765 103.66657388]

=== Right contact angle: ===
[70.49951834 70.1299055  70.71083382 69.92671529 70.36612862 70.14270695
 69.46986584 69.85713422 69.7853119  69.89271411 70.77508121 71.62557837
 72.39170002 72.11318111 72.83302367 71.75478947 72.11059154 73.66624147
 72.29808509 71.87726432 72.05937138 72.42824549 71.98435316 72.24383613
 72.13157375 72.0712229  72.14669981 72.33741789 72.5867288  72.44292541
 74.31487733 74.20368009 77.78053316 73.58388048 72.41755972 72.34645656
 71.23826656 72.56089046]

=== Drop contact positions: ===
[[1.93832964 4.90852869]
 [1.9383381  4.90723033]
 [1.93861383 4.90483267]
 [1.93671908 4.90809455]
 [1.93600406 4.90858664]
 [1.93615952 4.9070416 ]
 [1.93634843 4.90952053]
 [1.93689621 4.90750024]
 [1.93664427 4.90404155]
 [1.93673364 4.90270441]
 [1.82986022 4.97697942]
 [1.66242062 5.1632435 ]
 [1.50391141 5.3317036 ]
 [1.37008729 5.45485383]
 [1.31325928 5.60250705]
 [1.12961601 5.61792064]
 [1.07022579 5.72288739]
 [1.08781048 5.84436594]
 [1.07971978 5.83596298]
 [1.07061923 5.83787147]
 [1.07040238 5.83480219]
 [1.07000855 5.83446575]
 [1.07021225 5.83108282]
 [1.07119756 5.83159342]
 [1.07091224 5.82816593]
 [1.07048666 5.82537719]
 [1.07006687 5.82606727]
 [1.07056253 5.82534949]
 [1.07072783 5.82771558]
 [1.14615126 5.76372021]
 [1.22834386 5.63496423]
 [1.3624827  5.50338496]
 [1.48844526 5.38162034]
 [1.59604399 5.25495474]
 [1.75512248 5.10651467]
 [1.83889684 5.0346689 ]
 [1.83687488 5.03739273]
 [1.83756333 5.03659173]]
</code></pre>



    
    
        <div class="chevrons">
    <div id="navigation">
<a class="nav nav-prev" href="/Python-cookbook/pydsa/" title="Drop Shape analysis using pyDSA (image)"> <i class="fa fa-chevron-left"></i><label>Drop Shape analysis using pyDSA (image)</label></a>
    <a class="nav nav-next" href="/Python-cookbook/import-data/" title="Importing Data" style="margin-right: 0px;"><label>Importing Data</label><i class="fa fa-chevron-right"></i></a></div>
  </div>

  </section>
</article>

<footer>

<div class="footline">
    

    

  

    <div class="github-link">
      <a href="pydsa_video/_index.md" target="blank"><i class="fa fa-code-fork"></i>
        Improve this page</a>
    </div>
  </div>


	<div>


  
    
  



	</div>
</footer>

<script src="/Python-cookbook/js/clipboard.min.js"></script>

<link href="/Python-cookbook/css/featherlight.min.css" rel="stylesheet">
<script src="/Python-cookbook/js/featherlight.min.js"></script>



<script src="/Python-cookbook/theme-flex/script.js"></script>

    

    
    

    
  </body>
</html>