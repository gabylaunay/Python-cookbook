<!DOCTYPE html>
<html>
  <head>
    <title>Python Cookbook for Scientific Data Analysis</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="generator" content="Hugo 0.37.1" />
<title>Drop Shape analysis using pyDSA (video) :: Python Cookbook for Scientific Data Analysis</title>
<link rel="shortcut icon" href="/Python-cookbook/images/favicon.png" type="image/x-icon" />
<link href="/Python-cookbook/css/font-awesome.min.css" rel="stylesheet">
<link href="/Python-cookbook/css/nucleus.css" rel="stylesheet">
<link href="/Python-cookbook/theme-flex/style.css" rel="stylesheet">

<link rel="stylesheet" href="/Python-cookbook/css/bootstrap.min.css">
<script src="/Python-cookbook/js/jquery-2.x.min.js"></script>
<script type="text/javascript">
      var baseurl = "https:\/\/gabylaunay.github.io\/Python-cookbook\/";
</script>
<meta name="description" content="Tutorial for drop shape analysis using pyDSA on a video.">


    
  </head>
  <body data-url="/Python-cookbook/pydsa_video/">
    
      <header>
  <div class="logo">
    
	
  
    <a class="baselink" href="https://gabylaunay.github.io/Python-cookbook/">Python Cookbook for Scientific Data Analysis</a>
  

  </div>
  <div class="burger"><a href="javascript:void(0);" style="font-size:15px;">&#9776;</a></div>
</header>
<article>
  <aside>
    <ul class="menu">
          <li data-nav-id="/Python-cookbook/" class="dd-item">
          <a href="/Python-cookbook/">
            <i class="fa fa-fw fa-home"></i>
          </a>
          </li>
    <li data-nav-id="/Python-cookbook/image-analysis/" class="dd-item
        ">
      <div>
      <a href="/Python-cookbook/image-analysis/">Drop Shape analysis using Python</a>
      </div>
    </li>
    <li data-nav-id="/Python-cookbook/pydsa/" class="dd-item
        ">
      <div>
      <a href="/Python-cookbook/pydsa/">Drop Shape analysis using pyDSA (image)</a>
      </div>
    </li>
    <li data-nav-id="/Python-cookbook/pydsa_video/" class="dd-item parent active
        ">
      <div>
      <a href="/Python-cookbook/pydsa_video/">Drop Shape analysis using pyDSA (video)</a>
      </div>
    </li>
    <li data-nav-id="/Python-cookbook/import-data/" class="dd-item
        ">
      <div>
      <a href="/Python-cookbook/import-data/">Importing Data</a>
      </div>
    </li>




    </ul>
    <section>
    </section>
  </aside>
  <section class="page">
    
    <div class="nav-select">
      <center>Navigation : 
        <select onchange="javascript:location.href = this.value;">
          
    <option value="/Python-cookbook/image-analysis/" >
   Drop Shape analysis using Python</option>
    <option value="/Python-cookbook/pydsa/" >
   Drop Shape analysis using pyDSA (image)</option>
    <option value="/Python-cookbook/pydsa_video/"  selected>
   Drop Shape analysis using pyDSA (video)</option> 
  
    <option value="/Python-cookbook/import-data/" >
   Importing Data</option>



        </select>
      </center>
    </div>
      <div>
        <div class="searchbox">
          <input data-search-input id="search-by" type="text" placeholder="Search...">
        </div>
        <script type="text/javascript" src="/Python-cookbook/js/lunr.min.js"></script>
        <script type="text/javascript" src="/Python-cookbook/js/auto-complete.js"></script>
        <link href="/Python-cookbook/css/auto-complete.css" rel="stylesheet">
        <script type="text/javascript">
          
              var baseurl = "https:\/\/gabylaunay.github.io\/Python-cookbook\/";
          
        </script>
        <script type="text/javascript" src="/Python-cookbook/js/search.js"></script>
      </div>
    

    <h1>Drop Shape analysis using pyDSA (video)</h1>
    
    
    



<p><div class="notices tip" ><p>You can get the python script detailled in this page here: <a href="files/script.py">script.py</a>.</p>

<p>And an archive containing the script and the data here: <a href="files/archive.tar.gz">archive.tar.gz</a>, <a href="files/archive.zip">archive.zip</a>.</p>
</div>

It is recommended to read the tutorial on using pyDSA on a single image before doing this tutorial.</p>

<h2 id="importing-a-video">Importing a video</h2>

<p>Importing works in the same way than for an image.
Importing images in Python can easily fill your memory, you can import only some images of the video by using the <code>incr</code> argument.</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#007020;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">pyDSA</span> <span style="color:#007020;font-weight:bold">as</span> <span style="color:#0e84b5;font-weight:bold">dsa</span>
<span style="color:#007020;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">matplotlib.pyplot</span> <span style="color:#007020;font-weight:bold">as</span> <span style="color:#0e84b5;font-weight:bold">plt</span>

<span style="color:#60a0b0;font-style:italic"># Import an image</span>
ims <span style="color:#666">=</span> dsa<span style="color:#666">.</span>import_from_video(<span style="color:#4070a0"></span><span style="color:#4070a0">&#39;data/video.mp4&#39;</span>,
                            dx<span style="color:#666">=</span><span style="color:#40a070">1</span><span style="color:#666">/</span><span style="color:#40a070">120</span>, dy<span style="color:#666">=</span><span style="color:#40a070">1</span><span style="color:#666">/</span><span style="color:#40a070">120</span>, dt<span style="color:#666">=</span><span style="color:#40a070">1</span><span style="color:#666">/</span><span style="color:#40a070">10</span>,
                            unit_x<span style="color:#666">=</span><span style="color:#4070a0"></span><span style="color:#4070a0">&#39;mm&#39;</span>, unit_y<span style="color:#666">=</span><span style="color:#4070a0"></span><span style="color:#4070a0">&#39;mm&#39;</span>, unit_t<span style="color:#666">=</span><span style="color:#4070a0"></span><span style="color:#4070a0">&#39;s&#39;</span>,
                            incr<span style="color:#666">=</span><span style="color:#40a070">1</span>)

<span style="color:#60a0b0;font-style:italic"># Display</span>
ims<span style="color:#666">.</span>display()
plt<span style="color:#666">.</span>show()</code></pre></div>
<p><img src="pydsa_video_files/pydsa_video_1_0.png" alt="png" /></p>

<h2 id="detecting-the-edges-and-contact-angles">Detecting the edges and contact angles</h2>

<p>The method is similar than for a single image: setting the baseline, detecting the edges, fitting the edges, and computing the contact angles.</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">ims<span style="color:#666">.</span>set_baseline([<span style="color:#40a070">0.0</span>, <span style="color:#40a070">0.583</span>],
                 [<span style="color:#40a070">6.492</span>, <span style="color:#40a070">0.57</span>])
edges <span style="color:#666">=</span> ims<span style="color:#666">.</span>edge_detection()
edges<span style="color:#666">.</span>fit()
edges<span style="color:#666">.</span>compute_contact_angle()

<span style="color:#60a0b0;font-style:italic"># Display</span>
fig, axs <span style="color:#666">=</span> plt<span style="color:#666">.</span>subplots(<span style="color:#40a070">2</span>, <span style="color:#40a070">3</span>, figsize<span style="color:#666">=</span>(<span style="color:#40a070">15</span>, <span style="color:#40a070">6.9</span>), sharex<span style="color:#666">=</span>True, sharey<span style="color:#666">=</span>True)
<span style="color:#007020;font-weight:bold">for</span> i, ax <span style="color:#007020;font-weight:bold">in</span> <span style="color:#007020">enumerate</span>(axs<span style="color:#666">.</span>flat):
    plt<span style="color:#666">.</span>sca(ax)
    ind <span style="color:#666">=</span> <span style="color:#007020">int</span>(i<span style="color:#666">/</span><span style="color:#40a070">5</span><span style="color:#666">*</span>(<span style="color:#007020">len</span>(ims) <span style="color:#666">-</span> <span style="color:#40a070">1</span>))
    ims[ind]<span style="color:#666">.</span>_display()
    edges[ind]<span style="color:#666">.</span>display()
    plt<span style="color:#666">.</span>xlabel(<span style="color:#4070a0"></span><span style="color:#4070a0">&#39;&#39;</span>)
    plt<span style="color:#666">.</span>ylabel(<span style="color:#4070a0"></span><span style="color:#4070a0">&#39;&#39;</span>)
    plt<span style="color:#666">.</span>title(<span style="color:#4070a0"></span><span style="color:#4070a0">&#39;t={:.2f}s&#39;</span><span style="color:#666">.</span>format(ims<span style="color:#666">.</span>times[ind]))
plt<span style="color:#666">.</span>xlim(<span style="color:#40a070">0</span>, <span style="color:#40a070">6.5</span>)
plt<span style="color:#666">.</span>ylim(<span style="color:#40a070">0</span>, <span style="color:#40a070">4.5</span>)
plt<span style="color:#666">.</span>show()</code></pre></div>
<p><img src="pydsa_video_files/pydsa_video_3_0.png" alt="png" /></p>

<h2 id="plotting-the-drop-properties-evolution">Plotting the drop properties evolution</h2>

<p>You can then display a summary of the drop properties evolution.</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">edges<span style="color:#666">.</span>display_summary(figsize<span style="color:#666">=</span>(<span style="color:#40a070">10</span>, <span style="color:#40a070">8</span>))
plt<span style="color:#666">.</span>show()</code></pre></div>
<p><img src="pydsa_video_files/pydsa_video_5_0.png" alt="png" /></p>

<h2 id="accessing-the-drop-properties">Accessing the drop properties</h2>

<p>Angles are defined in the trigonometric sens, from the horizontal.</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">thetas, thetas_t <span style="color:#666">=</span> edges<span style="color:#666">.</span>get_contact_angles()
<span style="color:#007020;font-weight:bold">print</span>(<span style="color:#4070a0"></span><span style="color:#4070a0">&#34;=== Left contact angle: ===&#34;</span>)
<span style="color:#007020;font-weight:bold">print</span>(thetas[:, <span style="color:#40a070">0</span>])
<span style="color:#007020;font-weight:bold">print</span>(<span style="color:#4070a0"></span><span style="color:#4070a0">&#34;</span><span style="color:#4070a0;font-weight:bold">\n</span><span style="color:#4070a0">=== Right contact angle: ===&#34;</span>)
<span style="color:#007020;font-weight:bold">print</span>(thetas[:, <span style="color:#40a070">1</span>])

radius <span style="color:#666">=</span> edges<span style="color:#666">.</span>get_drop_base()
<span style="color:#007020;font-weight:bold">print</span>(<span style="color:#4070a0"></span><span style="color:#4070a0">&#34;</span><span style="color:#4070a0;font-weight:bold">\n</span><span style="color:#4070a0">=== Drop base: ===&#34;</span>)
<span style="color:#007020;font-weight:bold">print</span>(radius)</code></pre></div>
<pre><code>=== Left contact angle: ===
[107.23888862 107.37400597 107.05007046 106.86408573 107.09403969
 106.87152793 106.89288488 107.58136308 106.87594673 107.19126851
 106.7112947  105.7573553  108.49189273 107.93621437 108.02598317
 106.22630943 105.39799791 107.07903966 107.56878519 106.39527947
 105.81315002 106.46467088 106.25154551 106.26044864 106.23025799
 106.62498501 105.91004866 105.93039563 105.74143665 107.00158745
 106.8341172  105.38875097 104.60591926 103.55222994 103.38568201
 103.69710654 104.54526798 104.28718362]

=== Right contact angle: ===
[69.81007431 70.06452567 69.94918814 70.46867058 69.86748429 69.78341881
 70.00252248 69.35932262 68.97432279 69.70237737 71.18163723 72.69288788
 73.16778647 70.7287935  71.19678366 71.79424    72.74553129 72.31503295
 71.58481928 71.18967459 71.6835157  71.24023387 71.86786301 71.76356703
 72.05721971 71.50635367 71.23118285 71.56113545 71.56776239 73.05972939
 73.08250744 74.56329023 76.79512481 74.20533479 72.49144642 73.07689257
 72.16620216 73.29188537]

=== Drop base: ===
[[1.92934707 4.88357022]
 [1.92939055 4.88213705]
 [1.9294059  4.87987593]
 [1.92838685 4.88230159]
 [1.92931732 4.88091349]
 [1.92864203 4.88004908]
 [1.92841013 4.88244095]
 [1.92819769 4.88182788]
 [1.92878161 4.87739426]
 [1.92828479 4.87678923]
 [1.8123559  4.96065597]
 [1.65386226 5.13711602]
 [1.49540105 5.30579731]
 [1.36169947 5.42793154]
 [1.31230875 5.57112045]
 [1.12948343 5.58552115]
 [1.0635439  5.69419133]
 [1.07904108 5.81586566]
 [1.07044106 5.80780901]
 [1.07149772 5.8031047 ]
 [1.07234249 5.79946514]
 [1.06430916 5.80621992]
 [1.06266364 5.80193666]
 [1.07190157 5.79594741]
 [1.06221319 5.80084337]
 [1.06262739 5.7994491 ]
 [1.06290811 5.79973602]
 [1.06261745 5.79818615]
 [1.07110155 5.79363283]
 [1.136702   5.73827396]
 [1.22100692 5.60771593]
 [1.35406724 5.47564621]
 [1.47956351 5.35478322]
 [1.58778352 5.22749747]
 [1.74789859 5.07840671]
 [1.82160408 5.01571592]
 [1.82934729 5.01013236]
 [1.82893682 5.00764041]]
</code></pre>



    
    
        <div class="chevrons">
    <div id="navigation">
<a class="nav nav-prev" href="/Python-cookbook/pydsa/" title="Drop Shape analysis using pyDSA (image)"> <i class="fa fa-chevron-left"></i><label>Drop Shape analysis using pyDSA (image)</label></a>
    <a class="nav nav-next" href="/Python-cookbook/import-data/" title="Importing Data" style="margin-right: 0px;"><label>Importing Data</label><i class="fa fa-chevron-right"></i></a></div>
  </div>

  </section>
</article>

<footer>

<div class="footline">
    

    

  

    <div class="github-link">
      <a href="pydsa_video/_index.md" target="blank"><i class="fa fa-code-fork"></i>
        Improve this page</a>
    </div>
  </div>


	<div>


  
    
  



	</div>
</footer>

<script src="/Python-cookbook/js/clipboard.min.js"></script>

<link href="/Python-cookbook/css/featherlight.min.css" rel="stylesheet">
<script src="/Python-cookbook/js/featherlight.min.js"></script>



<script src="/Python-cookbook/theme-flex/script.js"></script>

    

    
    

    
  </body>
</html>